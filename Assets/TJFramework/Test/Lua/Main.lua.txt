
-- TODO: 注释
local function LBehaviourBind(gameObject, luaInst, LBehaviour)
    LBehaviour = LBehaviour or CS.TJ.LBehaviour;
    local comp = gameObject:AddComponent(typeof(LBehaviour));
    comp:Bind(luaInst);
end


print("do once")

CS.TJ.LuaManager.Instance.funcEngineReset = function ()
    print("call lua funcEngineReset")
end

-- 演示持有自己
local scenename = CS.UnityEngine.SceneManagement.SceneManager.GetActiveScene().path
local bname = CS.TJ.BundleManager.Instance:AssetBundleName(scenename)
local bundle = CS.TJ.BundleManager.Instance:LoadBundle(bname)
CS.TJ.BundleManager.Instance:SetBundleHold(bundle, true)

return function()
    print("init scene")
    local go = CS.UnityEngine.GameObject.Find("Canvas")
    LBehaviourBind(go, require("Scene1")(), CS.TJ.LBehaviour)
end